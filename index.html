<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="appTitle">Geografia Interativa dos EUA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .tab-button.active {
            border-bottom-width: 4px;
            border-color: #0284c7; /* sky-600 */
            color: #0284c7;
        }
        .region-button.active {
            background-color: #059669; /* emerald-600 */
            color: white;
        }
        .feature-button.active {
            background-color: #059669; /* emerald-600 */
            color: white;
        }
        .accordion-button.active {
            background-color: #e5e7eb; /* gray-200 */
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        .accordion-content.open {
            max-height: 1000px; /* Adjust as needed */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 320px;
            max-height: 400px;
        }
        @media (min-width: 640px) { /* sm */
            .chart-container {
                height: 384px;
            }
        }
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal-overlay.open {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
            max-width: 500px;
            width: 90%;
            position: relative;
            transform: translateY(-20px);
            transition: transform 0.3s ease;
        }
        .modal-overlay.open .modal-content {
            transform: translateY(0);
        }
        .modal-close-button {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #ef4444; /* red-500 */
        }
        .conceptual-map-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.5rem;
            max-width: 400px;
            margin: 0 auto 1.5rem auto;
            border: 1px solid #d1d5db; /* stone-300 */
            border-radius: 0.5rem;
            overflow: hidden;
        }
        .map-region-item {
            padding: 0.75rem;
            background-color: #f3f4f6; /* gray-100 */
            border: 1px solid #e5e7eb; /* gray-200 */
            text-align: center;
            font-size: 0.875rem;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.1s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 50px;
        }
        .map-region-item:hover {
            background-color: #e5e7eb; /* gray-200 */
        }
        .map-region-item.active-map-region {
            background-color: #059669; /* emerald-600 */
            color: white;
            font-weight: bold;
            border-color: #047857; /* emerald-700 */
        }
        .map-region-item[data-map-region="nordeste"] { grid-column: 3; grid-row: 1; }
        .map-region-item[data-map-region="centro-oeste"] { grid-column: 2; grid-row: 2; }
        .map-region-item[data-map-region="oeste"] { grid-column: 1; grid-row: 2; }
        .map-region-item[data-map-region="sudoeste"] { grid-column: 1 / span 2; grid-row: 3; }
        .map-region-item[data-map-region="sul"] { grid-column: 3; grid-row: 2 / span 2; }
        
        @media (max-width: 639px) {
            .conceptual-map-grid {
                grid-template-columns: repeat(2, 1fr);
                max-width: 300px;
            }
            .map-region-item[data-map-region="nordeste"] { grid-column: 2; grid-row: 1; }
            .map-region-item[data-map-region="centro-oeste"] { grid-column: 1; grid-row: 1; }
            .map-region-item[data-map-region="oeste"] { grid-column: 1; grid-row: 2; }
            .map-region-item[data-map-region="sudoeste"] { grid-column: 2; grid-row: 2; }
            .map-region-item[data-map-region="sul"] { grid-column: 1 / span 2; grid-row: 3; }
        }

        /* Quiz Styles */
        .quiz-option-button {
            background-color: #f3f4f6; /* gray-100 */
            border: 1px solid #d1d5db; /* stone-300 */
            color: #374151; /* gray-700 */
            padding: 0.75rem 1rem;
            border-radius: 0.375rem; /* rounded-md */
            text-align: left;
            transition: background-color 0.2s ease, border-color 0.2s ease;
            cursor: pointer;
            width: 100%;
        }
        .quiz-option-button:hover {
            background-color: #e5e7eb; /* gray-200 */
        }
        .quiz-option-button.selected {
            background-color: #3b82f6; /* blue-500 */
            color: white;
            border-color: #2563eb; /* blue-600 */
        }
        .quiz-option-button.correct {
            background-color: #10b981; /* emerald-500 */
            color: white;
            border-color: #059669; /* emerald-600 */
        }
        .quiz-option-button.incorrect {
            background-color: #ef4444; /* red-500 */
            color: white;
            border-color: #dc2626; /* red-600 */
        }
        .quiz-option-button:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }
        #feedback-text.correct {
            color: #059669; /* emerald-600 */
        }
        #feedback-text.incorrect {
            color: #dc2626; /* red-600 */
        }

    </style>
</head>
<body class="bg-stone-100 text-stone-800">
    <div class="container mx-auto p-4 sm:p-6 md:p-8 max-w-7xl">
        <header class="mb-8 text-center relative">
            <h1 id="headerTitle" class="text-4xl md:text-5xl font-bold text-sky-700">Explorando a Geografia dos EUA üá∫üá∏</h1>
            <p id="headerSubtitle" class="text-lg text-stone-600 mt-2">Uma jornada interativa pelas paisagens e caracter√≠sticas que definem uma na√ß√£o.</p>
            <div class="absolute top-0 right-0 mt-2 mr-2 sm:mt-4 sm:mr-4">
                <select id="language-select" class="p-2 rounded-md border border-stone-300 bg-white shadow-sm">
                    <option value="pt">Portugu√™s</option>
                    <option value="en">English</option>
                </select>
            </div>
        </header>

        <nav class="mb-8 flex flex-wrap justify-center border-b-2 border-stone-300">
            <button data-tab="visao-geral" class="tab-button active text-lg font-medium py-3 px-4 sm:px-6 hover:bg-stone-200 transition-colors"><span id="navVisaoGeral">Vis√£o Geral</span></button>
            <button data-tab="regioes" class="tab-button text-lg font-medium py-3 px-4 sm:px-6 hover:bg-stone-200 transition-colors"><span id="navRegioes">Grandes Regi√µes</span></button>
            <button data-tab="relevo-hidrografia" class="tab-button text-lg font-medium py-3 px-4 sm:px-6 hover:bg-stone-200 transition-colors"><span id="navRelevoHidrografia">Relevo e Hidrografia</span></button>
            <button data-tab="geografia-cultura" class="tab-button text-lg font-medium py-3 px-4 sm:px-6 hover:bg-stone-200 transition-colors"><span id="navGeografiaCultura">Geografia e Cultura</span></button>
            <button data-tab="quiz" class="tab-button text-lg font-medium py-3 px-4 sm:px-6 hover:bg-stone-200 transition-colors"><span id="navQuiz">Quiz Interativo</span></button>
        </nav>

        <main>
            <section id="visao-geral" class="tab-content bg-white p-6 rounded-lg shadow-lg">
                <h2 id="visaoGeralTitle" class="text-3xl font-semibold text-sky-600 mb-4">Bem-vindo √† Explora√ß√£o Geogr√°fica dos EUA!</h2>
                <p id="visaoGeralPara1" class="mb-4 text-lg leading-relaxed">
                    Esta aplica√ß√£o interativa foi criada para apresentar a voc√™ a diversidade e a complexidade da geografia dos Estados Unidos. A geografia de um pa√≠s √© fundamental para entender sua hist√≥ria, cultura, economia e os desafios que enfrenta. Os EUA, com sua vasta extens√£o territorial, abrigam uma incr√≠vel variedade de paisagens, climas e ecossistemas.
                </p>
                <p id="visaoGeralPara2" class="mb-4 text-lg leading-relaxed">
                    Navegue pelas abas para descobrir as caracter√≠sticas marcantes das <span class="font-semibold text-emerald-600">Grandes Regi√µes</span>, explorar as imponentes <span class="font-semibold text-emerald-600">Forma√ß√µes de Relevo e Hidrografia</span>, e entender como a <span class="font-semibold text-emerald-600">Geografia influencia a Cultura</span> e o modo de vida americano.
                </p>
                <p id="visaoGeralPara3" class="text-lg leading-relaxed">
                    Utilize os elementos interativos, como gr√°ficos e seletores, para aprofundar seu conhecimento. Esperamos que esta jornada seja informativa e estimulante!
                </p>
                 <div class="mt-6 text-center">
                    <button id="startExploringBtn" onclick="document.querySelector('[data-tab=\'regioes\']').click()" class="bg-sky-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-sky-700 transition-colors shadow-md">
                        <span id="textStartExploringBtn">Comece Explorando as Regi√µes üó∫Ô∏è</span>
                    </button>
                </div>
                <div class="mt-8 text-center">
                    <button id="curiosidadeVisaoGeralBtn" class="bg-emerald-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-emerald-700 transition-colors shadow-md">
                        <span id="curiosidadeVisaoGeralText">Curiosidade!</span> ‚ú®
                    </button>
                </div>
            </section>

            <section id="regioes" class="tab-content hidden bg-white p-6 rounded-lg shadow-lg">
                <h2 id="regioesTitle" class="text-3xl font-semibold text-sky-600 mb-6">As Grandes Regi√µes Geogr√°ficas dos EUA</h2>
                <p id="regioesIntro" class="mb-6 text-lg leading-relaxed">
                    Os Estados Unidos s√£o um pa√≠s de dimens√µes continentais, e sua geografia √© frequentemente dividida em grandes regi√µes, cada uma com identidades culturais, econ√¥micas e paisag√≠sticas distintas. Explore abaixo para conhecer as particularidades de cada uma. Ao selecionar uma regi√£o, voc√™ ver√° suas caracter√≠sticas e um gr√°fico comparativo ilustrativo sobre a diversidade de ecossistemas.
                </p>
                <h3 id="mapaConceitualTitle" class="text-xl font-semibold text-emerald-700 mb-3 text-center">Clique em uma regi√£o no mapa para explorar:</h3>
                <div class="conceptual-map-grid mb-6">
                    <div class="map-region-item" data-map-region="nordeste"><span id="mapNordeste">Nordeste</span></div>
                    <div class="map-region-item" data-map-region="centro-oeste"><span id="mapCentroOeste">Centro-Oeste</span></div>
                    <div class="map-region-item" data-map-region="oeste"><span id="mapOeste">Oeste</span></div>
                    <div class="map-region-item" data-map-region="sudoeste"><span id="mapSudoeste">Sudoeste</span></div>
                    <div class="map-region-item" data-map-region="sul"><span id="mapSul">Sul</span></div>
                </div>
                <div class="mb-6 flex flex-wrap justify-center gap-2">
                    <button data-region="nordeste" class="region-button active bg-sky-600 text-white py-2 px-4 rounded-md hover:bg-sky-700 transition-colors"><span id="btnNordeste">Nordeste</span> üèôÔ∏è</button>
                    <button data-region="sul" class="region-button py-2 px-4 rounded-md bg-stone-200 hover:bg-stone-300 transition-colors"><span id="btnSul">Sul</span> ‚òÄÔ∏è</button>
                    <button data-region="centro-oeste" class="region-button py-2 px-4 rounded-md bg-stone-200 hover:bg-stone-300 transition-colors"><span id="btnCentroOeste">Centro-Oeste</span> üåæ</button>
                    <button data-region="sudoeste" class="region-button py-2 px-4 rounded-md bg-stone-200 hover:bg-stone-300 transition-colors"><span id="btnSudoeste">Sudoeste</span> üèúÔ∏è</button>
                    <button data-region="oeste" class="region-button py-2 px-4 rounded-md bg-stone-200 hover:bg-stone-300 transition-colors"><span id="btnOeste">Oeste/Costa Oeste</span> üèûÔ∏è</button>
                </div>
                <div id="region-info" class="mb-6 p-4 border border-stone-300 rounded-lg bg-stone-50 min-h-[200px] flex flex-col md:flex-row items-center md:items-start gap-4">
                    </div>
                <h3 id="regioesChartTitle" class="text-2xl font-semibold text-emerald-700 mb-3 text-center">Comparativo Regional: N√∫mero de Ecossistemas Principais (Estimado)</h3>
                <p id="regioesChartSubtitle" class="text-center text-sm text-stone-600 mb-4">Este gr√°fico ilustra uma estimativa da diversidade de grandes ecossistemas por regi√£o. Clique nas regi√µes acima para atualizar.</p>
                <div class="chart-container">
                    <canvas id="regioesChart"></canvas>
                </div>
            </section>

            <section id="relevo-hidrografia" class="tab-content hidden bg-white p-6 rounded-lg shadow-lg">
                <h2 id="relevoHidrografiaTitle" class="text-3xl font-semibold text-sky-600 mb-6">Relevo e Hidrografia dos EUA</h2>
                <p id="relevoHidrografiaIntro" class="mb-6 text-lg leading-relaxed">
                    As formas do terreno (relevo) e a distribui√ß√£o das √°guas (hidrografia) s√£o elementos cruciais que definem as paisagens e influenciam o clima e a ocupa√ß√£o humana. Os EUA apresentam uma grande variedade, desde imponentes cadeias montanhosas a vastas plan√≠cies e extensos sistemas fluviais. Explore os bot√µes abaixo para aprender sobre cada componente.
                </p>
                <div class="mb-6 flex flex-wrap justify-center gap-2">
                    <button data-feature="montanhas" class="feature-button bg-sky-600 text-white py-2 px-4 rounded-md hover:bg-sky-700 transition-colors"><span id="btnMontanhas">Montanhas</span> ‚õ∞Ô∏è</button>
                    <button data-feature="planicies" class="feature-button py-2 px-4 rounded-md bg-stone-200 hover:bg-stone-300 transition-colors"><span id="btnPlanicies">Grandes Plan√≠cies</span> üåæ</button>
                    <button data-feature="rios-lagos" class="feature-button py-2 px-4 rounded-md bg-stone-200 hover:bg-stone-300 transition-colors"><span id="btnRiosLagos">Rios e Lagos</span> üåä</button>
                    <button data-feature="litoral" class="feature-button py-2 px-4 rounded-md bg-stone-200 hover:bg-stone-300 transition-colors"><span id="btnLitoral">Litoral</span> üèñÔ∏è</button>
                </div>
                <div id="feature-info" class="p-4 border border-stone-300 rounded-lg bg-stone-50 min-h-[150px] flex flex-col md:flex-row items-center md:items-start gap-4">
                    </div>
                <div id="rios-chart-container" class="hidden mt-6">
                    <h3 id="riosChartTitle" class="text-2xl font-semibold text-emerald-700 mb-3 text-center">Comparativo: Extens√£o de Rios Selecionados (Estimativa em km)</h3>
                    <p id="riosChartSubtitle" class="text-center text-sm text-stone-600 mb-4">Este gr√°fico mostra a extens√£o aproximada de alguns dos principais rios dos EUA.</p>
                    <div class="chart-container">
                        <canvas id="riosChart"></canvas>
                    </div>
                </div>
                <div class="mt-8 text-center">
                    <button id="curiosidadeRelevoBtn" class="bg-emerald-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-emerald-700 transition-colors shadow-md">
                        <span id="curiosidadeRelevoText">Curiosidade!</span> ‚ú®
                    </button>
                </div>
            </section>

            <section id="geografia-cultura" class="tab-content hidden bg-white p-6 rounded-lg shadow-lg">
                <h2 id="geografiaCulturaTitle" class="text-3xl font-semibold text-sky-600 mb-6">O Impacto da Geografia na Cultura Americana</h2>
                <p id="geografiaCulturaIntro" class="mb-6 text-lg leading-relaxed">
                    A geografia de um lugar n√£o √© apenas um pano de fundo; ela √© uma for√ßa ativa que molda profundamente como as pessoas vivem, trabalham, se relacionam e desenvolvem suas culturas. Nos Estados Unidos, a diversidade geogr√°fica resultou em uma rica tape√ßaria de estilos de vida, economias regionais e at√© mesmo desafios espec√≠ficos. Clique nos t√≥picos abaixo para expandir e ver como diferentes aspectos geogr√°ficos influenciam a vida nos EUA.
                </p>
                <div class="space-y-3">
                    <div>
                        <button class="accordion-button w-full text-left font-semibold p-4 bg-stone-100 hover:bg-stone-200 rounded-md transition-colors flex justify-between items-center">
                            <span id="accClimaTitle">Clima e Estilo de Vida</span> ‚òÄÔ∏è‚ùÑÔ∏è
                            <span class="arrow transform transition-transform duration-300">‚ñº</span>
                        </button>
                        <div class="accordion-content bg-stone-50 p-4 border border-t-0 border-stone-200 rounded-b-md">
                            <p id="accClimaContent"></p>
                        </div>
                    </div>
                    <div>
                        <button class="accordion-button w-full text-left font-semibold p-4 bg-stone-100 hover:bg-stone-200 rounded-md transition-colors flex justify-between items-center">
                            <span id="accEconomiaTitle">Economia Local</span> üåΩüè≠
                            <span class="arrow transform transition-transform duration-300">‚ñº</span>
                        </button>
                        <div class="accordion-content bg-stone-50 p-4 border border-t-0 border-stone-200 rounded-b-md">
                            <p id="accEconomiaContent"></p>
                        </div>
                    </div>
                    <div>
                        <button class="accordion-button w-full text-left font-semibold p-4 bg-stone-100 hover:bg-stone-200 rounded-md transition-colors flex justify-between items-center">
                            <span id="accDesenvolvimentoTitle">Desenvolvimento Urbano</span> üèôÔ∏èüöó
                            <span class="arrow transform transition-transform duration-300">‚ñº</span>
                        </button>
                        <div class="accordion-content bg-stone-50 p-4 border border-t-0 border-stone-200 rounded-b-md">
                            <p id="accDesenvolvimentoContent"></p>
                        </div>
                    </div>
                    <div>
                        <button class="accordion-button w-full text-left font-semibold p-4 bg-stone-100 hover:bg-stone-200 rounded-md transition-colors flex justify-between items-center">
                            <span id="accDesafiosTitle">Desafios Naturais</span> üå™Ô∏èÂú∞Èúá
                            <span class="arrow transform transition-transform duration-300">‚ñº</span>
                        </button>
                        <div class="accordion-content bg-stone-50 p-4 border border-t-0 border-stone-200 rounded-b-md">
                            <p id="accDesafiosContent"></p>
                        </div>
                    </div>
                </div>
                <div class="mt-8 text-center">
                    <button id="curiosidadeCulturaBtn" class="bg-emerald-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-emerald-700 transition-colors shadow-md">
                        <span id="curiosidadeCulturaText">Curiosidade!</span> ‚ú®
                    </button>
                </div>
            </section>

            <section id="quiz" class="tab-content hidden bg-white p-6 rounded-lg shadow-lg">
                <h2 id="quizSectionTitle" class="text-3xl font-semibold text-sky-600 mb-6">Quiz Interativo de Geografia</h2>
                <p id="quizIntroText" class="mb-6 text-lg leading-relaxed">Teste seus conhecimentos sobre a geografia dos Estados Unidos!</p>
            
                <div id="quiz-area" class="bg-stone-50 p-4 sm:p-6 rounded-lg shadow">
                    <div id="question-container" class="mb-6">
                        <p id="question-text" class="text-xl font-semibold text-stone-700"></p>
                        <p id="question-counter" class="text-sm text-stone-500 mt-1"></p>
                    </div>
            
                    <div id="options-container" class="grid grid-cols-1 sm:grid-cols-2 gap-3 mb-6">
                        </div>
            
                    <div id="feedback-container" class="mb-6 min-h-[2.5rem]">
                        <p id="feedback-text" class="text-lg font-medium"></p>
                    </div>
            
                    <div class="text-center mb-6">
                        <button id="quiz-action-button" class="bg-sky-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-sky-700 transition-colors shadow-md disabled:opacity-50" disabled>
                            <span id="quizActionButtonText"></span>
                        </button>
                    </div>
            
                    <div id="score-container" class="hidden text-center">
                        <h3 id="quizScoreTitleText" class="text-2xl font-semibold text-emerald-700 mb-3"></h3>
                        <p id="final-score-text" class="text-3xl font-bold text-sky-600 mb-4"></p>
                        <p id="quizScoreMessageText" class="text-lg text-stone-600 mb-6"></p>
                        <button id="restart-quiz-button" class="bg-emerald-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-emerald-700 transition-colors shadow-md">
                            <span id="quizRestartButtonText"></span>
                        </button>
                    </div>
                </div>
            </section>

        </main>

        <footer class="mt-12 pt-6 border-t-2 border-stone-300 text-center text-stone-600">
            <p><span id="footerText">&copy; <span id="currentYear"></span> Aplica√ß√£o Interativa de Geografia. Conte√∫do adaptado para fins educacionais.</span></p>
        </footer>
    </div>

    <div id="curiosidadeModal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close-button">&times;</button>
            <h3 id="modalTitle" class="text-2xl font-semibold text-sky-600 mb-4">Curiosidade!</h3>
            <p id="modalContent" class="text-lg leading-relaxed"></p>
        </div>
    </div>

    <script>
        // DOM Elements
        const tabs = document.querySelectorAll('.tab-button');
        const tabContents = document.querySelectorAll('.tab-content');
        const regionButtons = document.querySelectorAll('.region-button');
        const regionInfoDiv = document.getElementById('region-info');
        const featureButtons = document.querySelectorAll('.feature-button');
        const featureInfoDiv = document.getElementById('feature-info');
        const riosChartContainer = document.getElementById('rios-chart-container');
        const accordionButtons = document.querySelectorAll('.accordion-button');
        const languageSelect = document.getElementById('language-select');
        const conceptualMapRegions = document.querySelectorAll('.map-region-item');

        const curiosidadeModal = document.getElementById('curiosidadeModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalContent = document.getElementById('modalContent');
        const modalCloseButton = document.querySelector('.modal-close-button');
        const curiosidadeVisaoGeralBtn = document.getElementById('curiosidadeVisaoGeralBtn');
        const curiosidadeRelevoBtn = document.getElementById('curiosidadeRelevoBtn');
        const curiosidadeCulturaBtn = document.getElementById('curiosidadeCulturaBtn');

        // Quiz DOM Elements
        const quizArea = document.getElementById('quiz-area');
        const questionContainer = document.getElementById('question-container');
        const questionTextEl = document.getElementById('question-text');
        const questionCounterEl = document.getElementById('question-counter');
        const optionsContainer = document.getElementById('options-container');
        const feedbackContainer = document.getElementById('feedback-container');
        const feedbackTextEl = document.getElementById('feedback-text');
        const quizActionButton = document.getElementById('quiz-action-button');
        const quizActionButtonTextEl = document.getElementById('quizActionButtonText');
        const scoreContainer = document.getElementById('score-container');
        const quizScoreTitleTextEl = document.getElementById('quizScoreTitleText');
        const finalScoreTextEl = document.getElementById('final-score-text');
        const quizScoreMessageTextEl = document.getElementById('quizScoreMessageText');
        const restartQuizButton = document.getElementById('restart-quiz-button');
        const quizRestartButtonTextEl = document.getElementById('quizRestartButtonText');


        let currentLanguage = 'pt'; // Default language
        document.getElementById('currentYear').textContent = new Date().getFullYear();

        // --- Charts (Global Variables) ---
        let regioesChartInstance = null;
        let riosChartInstance = null;

        // --- Content Data ---
        const contentData = {
            pt: {
                appTitle: "Geografia Interativa dos EUA",
                headerTitle: "Explorando a Geografia dos EUA üá∫üá∏",
                headerSubtitle: "Uma jornada interativa pelas paisagens e caracter√≠sticas que definem uma na√ß√£o.",
                navVisaoGeral: "Vis√£o Geral",
                navRegioes: "Grandes Regi√µes",
                navRelevoHidrografia: "Relevo e Hidrografia",
                navGeografiaCultura: "Geografia e Cultura",
                navQuiz: "Quiz Interativo",
                visaoGeralTitle: "Bem-vindo √† Explora√ß√£o Geogr√°fica dos EUA!",
                visaoGeralPara1: "Esta aplica√ß√£o interativa foi criada para apresentar a voc√™ a diversidade e a complexidade da geografia dos Estados Unidos. A geografia de um pa√≠s √© fundamental para entender sua hist√≥ria, cultura, economia e os desafios que enfrenta. Os EUA, com sua vasta extens√£o territorial, abrigam uma incr√≠vel variedade de paisagens, climas e ecossistemas.",
                visaoGeralPara2: "Navegue pelas abas para descobrir as caracter√≠sticas marcantes das <span class='font-semibold text-emerald-600'>Grandes Regi√µes</span>, explorar as imponentes <span class='font-semibold text-emerald-600'>Forma√ß√µes de Relevo e Hidrografia</span>, e entender como a <span class='font-semibold text-emerald-600'>Geografia influencia a Cultura</span> e o modo de vida americano.",
                visaoGeralPara3: "Utilize os elementos interativos, como gr√°ficos e seletores, para aprofundar seu conhecimento. Esperamos que esta jornada seja informativa e estimulante!",
                textStartExploringBtn: "Comece Explorando as Regi√µes üó∫Ô∏è",
                curiosidadeVisaoGeralText: "Curiosidade!",
                regioesTitle: "As Grandes Regi√µes Geogr√°ficas dos EUA",
                regioesIntro: "Os Estados Unidos s√£o um pa√≠s de dimens√µes continentais, e sua geografia √© frequentemente dividida em grandes regi√µes, cada uma com identidades culturais, econ√¥micas e paisag√≠sticas distintas. Explore abaixo para conhecer as particularidades de cada uma. Ao selecionar uma regi√£o, voc√™ ver√° suas caracter√≠sticas e um gr√°fico comparativo ilustrativo sobre a diversidade de ecossistemas.",
                mapaConceitualTitle: "Clique em uma regi√£o no mapa para explorar:",
                mapNordeste: "Nordeste", mapSul: "Sul", mapCentroOeste: "Centro-Oeste", mapSudoeste: "Sudoeste", mapOeste: "Oeste",
                btnNordeste: "Nordeste", btnSul: "Sul", btnCentroOeste: "Centro-Oeste", btnSudoeste: "Sudoeste", btnOeste: "Oeste/Costa Oeste",
                regioesChartTitle: "Comparativo Regional: N√∫mero de Ecossistemas Principais (Estimado)",
                regioesChartSubtitle: "Este gr√°fico ilustra uma estimativa da diversidade de grandes ecossistemas por regi√£o. Clique nas regi√µes acima para atualizar.",
                relevoHidrografiaTitle: "Relevo e Hidrografia dos EUA",
                relevoHidrografiaIntro: "As formas do terreno (relevo) e a distribui√ß√£o das √°guas (hidrografia) s√£o elementos cruciais que definem as paisagens e influenciam o clima e a ocupa√ß√£o humana. Os EUA apresentam uma grande variedade, desde imponentes cadeias montanhosas a vastas plan√≠cies e extensos sistemas fluviais. Explore os bot√µes abaixo para aprender sobre cada componente.",
                btnMontanhas: "Montanhas", btnPlanicies: "Grandes Plan√≠cies", btnRiosLagos: "Rios e Lagos", btnLitoral: "Litoral",
                riosChartTitle: "Comparativo: Extens√£o de Rios Selecionados (Estimativa em km)",
                riosChartSubtitle: "Este gr√°fico mostra a extens√£o aproximada de alguns dos principais rios dos EUA.",
                curiosidadeRelevoText: "Curiosidade!",
                geografiaCulturaTitle: "O Impacto da Geografia na Cultura Americana",
                geografiaCulturaIntro: "A geografia de um lugar n√£o √© apenas um pano de fundo; ela √© uma for√ßa ativa que molda profundamente como as pessoas vivem, trabalham, se relacionam e desenvolvem suas culturas. Nos Estados Unidos, a diversidade geogr√°fica resultou em uma rica tape√ßaria de estilos de vida, economias regionais e at√© mesmo desafios espec√≠ficos. Clique nos t√≥picos abaixo para expandir e ver como diferentes aspectos geogr√°ficos influenciam a vida nos EUA.",
                accClimaTitle: "Clima e Estilo de Vida",
                accClimaContent: "Do calor √∫mido e subtropical do Sul, que influencia a arquitetura com varandas amplas e um ritmo de vida mais vagaroso, aos invernos rigorosos e nevados do Nordeste e partes do Centro-Oeste, que exigem prepara√ß√£o e moldam atividades de lazer como esqui e h√≥quei. Na Costa Oeste, climas mais amenos como o mediterr√¢neo na Calif√≥rnia favorecem atividades ao ar livre durante todo o ano. Essas varia√ß√µes clim√°ticas afetam tudo, desde o tipo de agricultura poss√≠vel at√© as roupas que as pessoas usam e as casas que constroem.",
                accEconomiaTitle: "Economia Local",
                accEconomiaContent: "A geografia √© um fator determinante para as atividades econ√¥micas. As vastas e f√©rteis Grandes Plan√≠cies no Centro-Oeste tornam a regi√£o o 'celeiro' do pa√≠s, com agricultura extensiva de gr√£os. Regi√µes costeiras, como o Nordeste e a Costa Oeste, historicamente se desenvolveram com base no com√©rcio mar√≠timo, pesca e, mais recentemente, turismo. A presen√ßa de recursos minerais, como carv√£o nos Apalaches ou petr√≥leo no Texas e Alasca, impulsiona ind√∫strias extrativas. O Sudoeste √°rido favorece a energia solar, enquanto as montanhas e florestas do Oeste atraem turismo e explora√ß√£o madeireira.",
                accDesenvolvimentoTitle: "Desenvolvimento Urbano",
                accDesenvolvimentoContent: "A localiza√ß√£o de muitas cidades americanas foi estrategicamente definida pela geografia. Portos naturais no Nordeste (Nova York, Boston) e na Costa Oeste (S√£o Francisco, Seattle) permitiram o florescimento de grandes centros urbanos. Rios naveg√°veis como o Mississippi e o Ohio facilitaram o transporte e o com√©rcio, levando ao crescimento de cidades em suas margens (St. Louis, Cincinnati). Em contraste, a expans√£o para o Oeste, com vastas extens√µes de terra, favoreceu um modelo de desenvolvimento mais disperso e dependente do autom√≥vel em muitas cidades.",
                accDesafiosTitle: "Desafios Naturais",
                accDesafiosContent: "A diversidade geogr√°fica tamb√©m traz consigo uma variedade de desafios naturais. A Costa do Golfo e a Costa Leste s√£o vulner√°veis a furac√µes. O Centro-Oeste √© conhecido como 'Tornado Alley' devido √† frequ√™ncia de tornados. A Calif√≥rnia e outras partes da Costa Oeste est√£o em zonas sismicamente ativas, sujeitas a terremotos. Inc√™ndios florestais s√£o uma amea√ßa crescente em √°reas √°ridas e florestais do Oeste, especialmente durante per√≠odos de seca. Esses desafios exigem planejamento, infraestrutura resiliente e sistemas de alerta precoce, moldando a forma como as comunidades se preparam e respondem a desastres.",
                curiosidadeCulturaText: "Curiosidade!",
                footerText: `&copy; ${new Date().getFullYear()} Aplica√ß√£o Interativa de Geografia. Conte√∫do adaptado para fins educacionais.`,
                modalTitle: "Curiosidade!",
                curiosidades: {
                    visaoGeral: "Os Estados Unidos s√£o o terceiro maior pa√≠s do mundo em √°rea total, ficando atr√°s apenas da R√∫ssia e do Canad√°.",
                    relevo: "O ponto mais alto dos EUA √© o Denali (anteriormente Monte McKinley) no Alasca, com 6.190 metros, e o ponto mais baixo √© o Vale da Morte na Calif√≥rnia, a 86 metros abaixo do n√≠vel do mar.",
                    cultura: "O Jazz, um g√™nero musical genuinamente americano, nasceu em Nova Orleans, Louisiana, uma cidade portu√°ria com uma rica mistura de culturas africanas, europeias e caribenhas."
                },
                regioesData: {
                    nordeste: { nome: "Nordeste üèôÔ∏è", descricao: "Ber√ßo da na√ß√£o, o Nordeste √© conhecido por suas cidades hist√≥ricas como Boston e Nova York, costas recortadas, os Montes Apalaches e invernos rigorosos. Sua economia √© diversificada, com forte presen√ßa em finan√ßas, educa√ß√£o e tecnologia. Culturalmente, possui grande influ√™ncia europeia e uma rica hist√≥ria colonial.", clima: "Temperado continental, com ver√µes quentes e invernos frios e nevados.", economia: "Finan√ßas, educa√ß√£o, sa√∫de, tecnologia, turismo.", ecossistemas: 4, imageUrl: "images/Times Square.jpeg" },
                    sul: { nome: "Sul ‚òÄÔ∏è", descricao: "Com clima mais quente e √∫mido, o Sul apresenta plan√≠cies costeiras, p√¢ntanos e o ic√¥nico Rio Mississippi. Tem uma hist√≥ria rica e complexa, marcada pela agricultura (algod√£o, tabaco), e uma cultura vibrante que inclui o blues, jazz e uma culin√°ria distinta. Recentemente, tem visto crescimento industrial e tur√≠stico.", clima: "Subtropical √∫mido, com ver√µes quentes e √∫midos e invernos amenos.", economia: "Agricultura, ind√∫stria (manufatura, automotiva), turismo, energia.", ecossistemas: 5, imageUrl: "images/The Mississippi River - Minnesota_.jpeg" },
                    "centro-oeste": { nome: "Centro-Oeste üåæ", descricao: "Conhecido como o 'celeiro dos EUA', o Centro-Oeste √© dominado por vastas pradarias e campos de cultivo, especialmente milho e soja. √â atravessado por grandes rios como o Mississippi e o Missouri. As cidades principais incluem Chicago e Detroit. O clima √© continental, com extremos de temperatura.", clima: "Continental, com ver√µes quentes e invernos frios.", economia: "Agricultura (milho, soja), manufatura, transporte.", ecossistemas: 3, imageUrl: "images/American Chicago.jpeg" },
                    sudoeste: { nome: "Sudoeste üèúÔ∏è", descricao: "Caracterizado por paisagens des√©rticas e semides√©rticas, como o Grand Canyon e o Deserto de Mojave. Possui uma forte influ√™ncia cultural hisp√¢nica e nativo-americana. Grandes cidades como Phoenix e Las Vegas se desenvolveram em meio √† aridez. A √°gua √© um recurso precioso e disputado.", clima: "√Årido e semi√°rido, com ver√µes muito quentes e invernos amenos.", economia: "Turismo, minera√ß√£o, agricultura irrigada, tecnologia.", ecossistemas: 2, imageUrl: "images/GRAND CANYON ULUSAL PARKI  SOUTH RIM  AZ.jpeg" },
                    oeste: { nome: "Oeste/Costa Oeste üèûÔ∏è", descricao: "Abrange uma diversidade impressionante, desde as praias da Calif√≥rnia e as florestas temperadas do Noroeste Pac√≠fico at√© as Montanhas Rochosas e a Grande Bacia. Inclui estados como Calif√≥rnia, Oregon, Washington e Colorado. √â um polo de inova√ß√£o tecnol√≥gica (Vale do Sil√≠cio) e ind√∫stria do entretenimento.", clima: "Variado: Mediterr√¢neo (CA), Mar√≠timo (OR, WA), Montanhoso, Des√©rtico.", economia: "Tecnologia, entretenimento, agricultura, turismo, recursos naturais.", ecossistemas: 6, imageUrl: "images/download (21).jpeg" }
                },
                featureData: {
                    montanhas: { nome: "Montanhas Rochosas e Apalaches ‚õ∞Ô∏è", descricao: "Os EUA s√£o cortados por duas grandes cadeias montanhosas: as Montanhas Rochosas no Oeste, mais jovens e imponentes, e os Montes Apalaches no Leste, mais antigos e erodidos. Essas montanhas influenciam o clima, os recursos h√≠dricos e os padr√µes de assentamento.", imagem: "images/Denali National Park, Alaska üá∫üá∏.jpeg" },
                    planicies: { nome: "Grandes Plan√≠cies Centrais üåæ", descricao: "Estendendo-se pelo cora√ß√£o do pa√≠s, as Grandes Plan√≠cies s√£o vastas √°reas de terreno relativamente plano, historicamente cobertas por pradarias. S√£o fundamentais para a agricultura americana, especialmente o cultivo de gr√£os e a pecu√°ria.", imagem: "images/Montana Past, present and future _ Great Plains, Montana _ Facebook.jpeg" },
                    "rios-lagos": { nome: "Rios Mississippi-Missouri e Grandes Lagos üåä", descricao: "O sistema fluvial Mississippi-Missouri √© um dos maiores do mundo, drenando grande parte do interior do pa√≠s. Os Grandes Lagos, na fronteira com o Canad√°, formam o maior grupo de lagos de √°gua doce da Terra. Ambos s√£o vitais para transporte, abastecimento de √°gua e ecossistemas.", imagem: "images/The Mississippi River - Minnesota_.jpeg" },
                    litoral: { nome: "Extensas Costas Atl√¢ntica, Pac√≠fica e do Golfo üèñÔ∏è", descricao: "Os EUA possuem um litoral vasto e diversificado, incluindo as praias arenosas da Costa Atl√¢ntica, as fal√©sias e enseadas da Costa Pac√≠fica, e os deltas e p√¢ntanos da Costa do Golfo. Essas √°reas costeiras s√£o densamente povoadas e economicamente importantes.", imagem: "images/California.jpeg" }
                },
                riosChartData: {
                    labels: ["Missouri", "Mississippi", "Yukon", "Rio Grande", "Colorado"],
                    data: [3767, 3544, 3190, 3051, 2330], // Comprimentos em km (aproximados)
                    label: "Extens√£o (km)"
                },
                // Quiz Content
                quizSectionTitle: "Quiz Interativo de Geografia",
                quizIntroText: "Teste seus conhecimentos sobre a geografia dos Estados Unidos!",
                quizQuestionCounterText: (current, total) => `Pergunta ${current} de ${total}`,
                quizActionButtonConfirm: "Confirmar Resposta",
                quizActionButtonNext: "Pr√≥xima Pergunta",
                quizActionButtonShowScore: "Ver Pontua√ß√£o Final",
                quizScoreTitleText: "Sua Pontua√ß√£o Final:",
                quizScoreMessageExcellent: (score, total) => `Excelente! Voc√™ acertou ${score} de ${total} perguntas.`,
                quizScoreMessageGood: (score, total) => `Muito bom! Voc√™ acertou ${score} de ${total} perguntas.`,
                quizScoreMessageImprove: (score, total) => `Voc√™ acertou ${score} de ${total}. Continue explorando para aprender mais!`,
                quizRestartButtonText: "Reiniciar Quiz",
                quizQuestions: [
                    {
                        question: "Qual √© a maior cadeia de montanhas em extens√£o no Oeste dos EUA?",
                        options: ["Apalaches", "Montanhas Rochosas", "Sierra Nevada", "Cordilheira das Cascatas"],
                        answer: "Montanhas Rochosas",
                        feedbackCorrect: "Correto! As Montanhas Rochosas s√£o uma vasta cadeia montanhosa no oeste da Am√©rica do Norte.",
                        feedbackIncorrect: "Incorreto. A resposta correta √© Montanhas Rochosas."
                    },
                    {
                        question: "Qual rio forma uma parte significativa da fronteira sul dos EUA com o M√©xico?",
                        options: ["Mississippi", "Missouri", "Colorado", "Rio Grande"],
                        answer: "Rio Grande",
                        feedbackCorrect: "Correto! O Rio Grande (ou R√≠o Bravo no M√©xico) define uma grande parte da fronteira.",
                        feedbackIncorrect: "Incorreto. A resposta correta √© Rio Grande."
                    },
                    {
                        question: "A regi√£o do 'Sudoeste' dos EUA √© caracterizada principalmente por qual tipo de clima?",
                        options: ["Tropical", "√Årido/Semi√°rido", "Temperado Mar√≠timo", "Continental √ömido"],
                        answer: "√Årido/Semi√°rido",
                        feedbackCorrect: "Correto! O Sudoeste √© conhecido por seus desertos e clima seco.",
                        feedbackIncorrect: "Incorreto. A resposta correta √© √Årido/Semi√°rido."
                    },
                    {
                        question: "Qual destas regi√µes √© conhecida como o 'celeiro dos EUA' devido √† sua vasta produ√ß√£o agr√≠cola?",
                        options: ["Nordeste", "Sul", "Centro-Oeste", "Oeste"],
                        answer: "Centro-Oeste",
                        feedbackCorrect: "Correto! O Centro-Oeste, com suas Grandes Plan√≠cies, √© o cora√ß√£o agr√≠cola do pa√≠s.",
                        feedbackIncorrect: "Incorreto. A resposta correta √© Centro-Oeste."
                    }
                ]
            },
            en: {
                appTitle: "Interactive US Geography",
                headerTitle: "Exploring US Geography üá∫üá∏",
                headerSubtitle: "An interactive journey through the landscapes and features that define a nation.",
                navVisaoGeral: "Overview",
                navRegioes: "Major Regions",
                navRelevoHidrografia: "Relief and Hydrography",
                navGeografiaCultura: "Geography and Culture",
                navQuiz: "Interactive Quiz",
                visaoGeralTitle: "Welcome to the US Geographic Exploration!",
                visaoGeralPara1: "This interactive application was created to introduce you to the diversity and complexity of the geography of the United States. A country's geography is fundamental to understanding its history, culture, economy, and the challenges it faces. The USA, with its vast territorial expanse, is home to an incredible variety of landscapes, climates, and ecosystems.",
                visaoGeralPara2: "Navigate through the tabs to discover the striking features of the <span class='font-semibold text-emerald-600'>Major Regions</span>, explore the imposing <span class='font-semibold text-emerald-600'>Landforms and Hydrography</span>, and understand how <span class='font-semibold text-emerald-600'>Geography influences Culture</span> and the American way of life.",
                visaoGeralPara3: "Use interactive elements, such as charts and selectors, to deepen your knowledge. We hope this journey is informative and stimulating!",
                textStartExploringBtn: "Start Exploring Regions üó∫Ô∏è",
                curiosidadeVisaoGeralText: "Did You Know?",
                regioesTitle: "The Major Geographic Regions of the USA",
                regioesIntro: "The United States is a country of continental dimensions, and its geography is often divided into large regions, each with distinct cultural, economic, and landscape identities. Explore below to learn about the particularities of each. When you select a region, you will see its characteristics and an illustrative comparative chart on ecosystem diversity.",
                mapaConceitualTitle: "Click on a region on the map to explore:",
                mapNordeste: "Northeast", mapSul: "South", mapCentroOeste: "Midwest", mapSudoeste: "Southwest", mapOeste: "West",
                btnNordeste: "Northeast", btnSul: "South", btnCentroOeste: "Midwest", btnSudoeste: "Southwest", btnOeste: "West/West Coast",
                regioesChartTitle: "Regional Comparison: Number of Major Ecosystems (Estimated)",
                regioesChartSubtitle: "This chart illustrates an estimate of the diversity of major ecosystems by region. Click on the regions above to update.",
                relevoHidrografiaTitle: "Relief and Hydrography of the USA",
                relevoHidrografiaIntro: "Landforms (relief) and water distribution (hydrography) are crucial elements that define landscapes and influence climate and human occupation. The USA has a wide variety, from imposing mountain ranges to vast plains and extensive river systems. Explore the buttons below to learn about each component.",
                btnMontanhas: "Mountains", btnPlanicies: "Great Plains", btnRiosLagos: "Rivers and Lakes", btnLitoral: "Coastline",
                riosChartTitle: "Comparison: Length of Selected Rivers (Estimate in km)",
                riosChartSubtitle: "This chart shows the approximate length of some of the major rivers in the USA.",
                curiosidadeRelevoText: "Did You Know?",
                geografiaCulturaTitle: "The Impact of Geography on American Culture",
                geografiaCulturaIntro: "The geography of a place is not just a backdrop; it is an active force that profoundly shapes how people live, work, relate, and develop their cultures. In the United States, geographical diversity has resulted in a rich tapestry of lifestyles, regional economies, and even specific challenges. Click on the topics below to expand and see how different geographical aspects influence life in the USA.",
                accClimaTitle: "Climate and Lifestyle",
                accClimaContent: "From the hot, humid subtropical South, influencing architecture with wide verandas and a slower pace of life, to the harsh, snowy winters of the Northeast and parts of the Midwest, requiring preparation and shaping leisure activities like skiing and hockey. On the West Coast, milder climates like the Mediterranean in California favor year-round outdoor activities. These climatic variations affect everything from the type of agriculture possible to the clothes people wear and the homes they build.",
                accEconomiaTitle: "Local Economy",
                accEconomiaContent: "Geography is a determining factor for economic activities. The vast, fertile Great Plains in the Midwest make the region the country's 'breadbasket,' with extensive grain farming. Coastal regions, like the Northeast and West Coast, historically developed based on maritime trade, fishing, and, more recently, tourism. The presence of mineral resources, such as coal in the Appalachians or oil in Texas and Alaska, drives extractive industries. The arid Southwest favors solar energy, while the mountains and forests of the West attract tourism and logging.",
                accDesenvolvimentoTitle: "Urban Development",
                accDesenvolvimentoContent: "The location of many American cities was strategically defined by geography. Natural harbors in the Northeast (New York, Boston) and on the West Coast (San Francisco, Seattle) allowed for the flourishing of large urban centers. Navigable rivers like the Mississippi and Ohio facilitated transportation and trade, leading to the growth of cities on their banks (St. Louis, Cincinnati). In contrast, westward expansion, with vast expanses of land, favored a more dispersed, car-dependent development model in many cities.",
                accDesafiosTitle: "Natural Challenges",
                accDesafiosContent: "Geographical diversity also brings a variety of natural challenges. The Gulf Coast and East Coast are vulnerable to hurricanes. The Midwest is known as 'Tornado Alley' due to the frequency of tornadoes. California and other parts of the West Coast are in seismically active zones, subject to earthquakes. Wildfires are a growing threat in arid and forested areas of the West, especially during droughts. These challenges require planning, resilient infrastructure, and early warning systems, shaping how communities prepare for and respond to disasters.",
                curiosidadeCulturaText: "Did You Know?",
                footerText: `&copy; ${new Date().getFullYear()} Interactive Geography Application. Content adapted for educational purposes.`,
                modalTitle: "Did You Know?",
                curiosidades: {
                    visaoGeral: "The United States is the third-largest country in the world by total area, ranking behind only Russia and Canada.",
                    relevo: "The highest point in the USA is Denali (formerly Mount McKinley) in Alaska, at 6,190 meters (20,310 feet), and the lowest point is Death Valley in California, at 86 meters (282 feet) below sea level.",
                    cultura: "Jazz, a genuinely American musical genre, was born in New Orleans, Louisiana, a port city with a rich mix of African, European, and Caribbean cultures."
                },
                regioesData: {
                    nordeste: { nome: "Northeast üèôÔ∏è", descricao: "Birthplace of the nation, the Northeast is known for its historic cities like Boston and New York, rugged coastlines, the Appalachian Mountains, and harsh winters. Its economy is diversified, with a strong presence in finance, education, and technology. Culturally, it has significant European influence and a rich colonial history.", clima: "Temperate continental, with hot summers and cold, snowy winters.", economia: "Finance, education, healthcare, technology, tourism.", ecossistemas: 4, imageUrl: "https://placehold.co/300x200/0284c7/FFFFFF?text=Northeast+USA" },
                    sul: { nome: "South ‚òÄÔ∏è", descricao: "With a warmer, more humid climate, the South features coastal plains, swamps, and the iconic Mississippi River. It has a rich and complex history, marked by agriculture (cotton, tobacco), and a vibrant culture that includes blues, jazz, and distinct cuisine. Recently, it has seen industrial and tourism growth.", clima: "Humid subtropical, with hot, humid summers and mild winters.", economia: "Agriculture, industry (manufacturing, automotive), tourism, energy.", ecossistemas: 5, imageUrl: "https://placehold.co/300x200/f97316/FFFFFF?text=South+USA" },
                    "centro-oeste": { nome: "Midwest üåæ", descricao: "Known as the 'breadbasket of the USA,' the Midwest is dominated by vast prairies and farmlands, especially corn and soybeans. It is crossed by major rivers like the Mississippi and Missouri. Major cities include Chicago and Detroit. The climate is continental, with temperature extremes.", clima: "Continental, with hot summers and cold winters.", economia: "Agriculture (corn, soybeans), manufacturing, transportation.", ecossistemas: 3, imageUrl: "https://placehold.co/300x200/ca8a04/FFFFFF?text=Midwest+USA" },
                    sudoeste: { nome: "Southwest üèúÔ∏è", descricao: "Characterized by desert and semi-desert landscapes, such as the Grand Canyon and Mojave Desert. It has a strong Hispanic and Native American cultural influence. Large cities like Phoenix and Las Vegas have developed amidst aridity. Water is a precious and contested resource.", clima: "Arid and semi-arid, with very hot summers and mild winters.", economia: "Tourism, mining, irrigated agriculture, technology.", ecossistemas: 2, imageUrl: "https://placehold.co/300x200/d97706/FFFFFF?text=Southwest+USA" },
                    oeste: { nome: "West/West Coast üèûÔ∏è", descricao: "Encompasses an impressive diversity, from California's beaches and the Pacific Northwest's temperate rainforests to the Rocky Mountains and the Great Basin. Includes states like California, Oregon, Washington, and Colorado. It is a hub for technological innovation (Silicon Valley) and the entertainment industry.", clima: "Varied: Mediterranean (CA), Oceanic (OR, WA), Mountain, Desert.", economia: "Technology, entertainment, agriculture, tourism, natural resources.", ecossistemas: 6, imageUrl: "https://placehold.co/300x200/059669/FFFFFF?text=West+USA" }
                },
                featureData: {
                    montanhas: { nome: "Rocky and Appalachian Mountains ‚õ∞Ô∏è", descricao: "The USA is crossed by two major mountain ranges: the Rocky Mountains in the West, younger and more imposing, and the Appalachian Mountains in the East, older and more eroded. These mountains influence climate, water resources, and settlement patterns.", imagem: "https://placehold.co/300x200/64748b/FFFFFF?text=US+Mountains" },
                    planicies: { nome: "Great Central Plains üåæ", descricao: "Stretching through the heart of the country, the Great Plains are vast areas of relatively flat terrain, historically covered by prairies. They are fundamental to American agriculture, especially grain cultivation and cattle ranching.", imagem: "https://placehold.co/300x200/a16207/FFFFFF?text=US+Plains" },
                    "rios-lagos": { nome: "Mississippi-Missouri Rivers and Great Lakes üåä", descricao: "The Mississippi-Missouri river system is one of the largest in the world, draining much of the country's interior. The Great Lakes, on the border with Canada, form the largest group of freshwater lakes on Earth. Both are vital for transportation, water supply, and ecosystems.", imagem: "https://placehold.co/300x200/0ea5e9/FFFFFF?text=Rivers+and+Lakes" },
                    litoral: { nome: "Extensive Atlantic, Pacific, and Gulf Coasts üèñÔ∏è", descricao: "The USA has a vast and diverse coastline, including the sandy beaches of the Atlantic Coast, the cliffs and coves of the Pacific Coast, and the deltas and swamps of the Gulf Coast. These coastal areas are densely populated and economically important.", imagem: "https://placehold.co/300x200/06b6d4/FFFFFF?text=US+Coastline" }
                },
                riosChartData: {
                    labels: ["Missouri", "Mississippi", "Yukon", "Rio Grande", "Colorado"],
                    data: [3767, 3544, 3190, 3051, 2330], // Lengths in km (approximate)
                    label: "Length (km)"
                },
                // Quiz Content
                quizSectionTitle: "Interactive Geography Quiz",
                quizIntroText: "Test your knowledge about the geography of the United States!",
                quizQuestionCounterText: (current, total) => `Question ${current} of ${total}`,
                quizActionButtonConfirm: "Confirm Answer",
                quizActionButtonNext: "Next Question",
                quizActionButtonShowScore: "Show Final Score",
                quizScoreTitleText: "Your Final Score:",
                quizScoreMessageExcellent: (score, total) => `Excellent! You answered ${score} out of ${total} questions correctly.`,
                quizScoreMessageGood: (score, total) => `Very good! You answered ${score} out of ${total} questions correctly.`,
                quizScoreMessageImprove: (score, total) => `You answered ${score} out of ${total} correctly. Keep exploring to learn more!`,
                quizRestartButtonText: "Restart Quiz",
                quizQuestions: [
                    {
                        question: "What is the largest mountain range by area in the Western USA?",
                        options: ["Appalachians", "Rocky Mountains", "Sierra Nevada", "Cascade Range"],
                        answer: "Rocky Mountains",
                        feedbackCorrect: "Correct! The Rocky Mountains are a vast mountain range in western North America.",
                        feedbackIncorrect: "Incorrect. The correct answer is Rocky Mountains."
                    },
                    {
                        question: "Which river forms a significant part of the southern U.S. border with Mexico?",
                        options: ["Mississippi", "Missouri", "Colorado", "Rio Grande"],
                        answer: "Rio Grande",
                        feedbackCorrect: "Correct! The Rio Grande (or R√≠o Bravo in Mexico) defines a large part of the border.",
                        feedbackIncorrect: "Incorrect. The correct answer is Rio Grande."
                    },
                    {
                        question: "The 'Southwest' region of the USA is primarily characterized by what type of climate?",
                        options: ["Tropical", "Arid/Semi-arid", "Temperate Oceanic", "Humid Continental"],
                        answer: "Arid/Semi-arid",
                        feedbackCorrect: "Correct! The Southwest is known for its deserts and dry climate.",
                        feedbackIncorrect: "Incorrect. The correct answer is Arid/Semi-arid."
                    },
                    {
                        question: "Which of these regions is known as the 'breadbasket of the USA' due to its vast agricultural production?",
                        options: ["Northeast", "South", "Midwest", "West"],
                        answer: "Midwest",
                        feedbackCorrect: "Correct! The Midwest, with its Great Plains, is the agricultural heartland of the country.",
                        feedbackIncorrect: "Incorrect. The correct answer is Midwest."
                    }
                ]
            }
        };

        // --- Quiz Logic ---
        let currentQuestionIndex = 0;
        let score = 0;
        let selectedOptionValue = null;
        let questions = [];

        function startQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            selectedOptionValue = null;
            questions = contentData[currentLanguage].quizQuestions;

            questionContainer.style.display = 'block';
            optionsContainer.style.display = 'grid'; // Or 'flex' etc.
            feedbackContainer.style.display = 'block';
            quizActionButton.style.display = 'inline-block';
            
            scoreContainer.classList.add('hidden');
            quizArea.classList.remove('hidden'); // Make sure main quiz area is visible

            feedbackTextEl.textContent = '';
            feedbackTextEl.className = 'text-lg font-medium'; // Reset class

            displayQuestion();
            updateQuizActionButton(contentData[currentLanguage].quizActionButtonConfirm, false);
        }

        function displayQuestion() {
            if (currentQuestionIndex >= questions.length) {
                showFinalScore();
                return;
            }

            const currentQuestion = questions[currentQuestionIndex];
            questionTextEl.textContent = currentQuestion.question;
            questionCounterEl.textContent = contentData[currentLanguage].quizQuestionCounterText(currentQuestionIndex + 1, questions.length);

            optionsContainer.innerHTML = '';
            currentQuestion.options.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option;
                button.classList.add('quiz-option-button');
                button.addEventListener('click', () => handleOptionClick(option, button));
                optionsContainer.appendChild(button);
            });
            feedbackTextEl.textContent = '';
            feedbackTextEl.className = 'text-lg font-medium';
            updateQuizActionButton(contentData[currentLanguage].quizActionButtonConfirm, false); // Disable until an option is selected
            selectedOptionValue = null; // Reset selected option for the new question
        }

        function handleOptionClick(option, buttonEl) {
            selectedOptionValue = option;
            // Remove 'selected' from all buttons
            Array.from(optionsContainer.children).forEach(btn => btn.classList.remove('selected'));
            // Add 'selected' to the clicked button
            buttonEl.classList.add('selected');
            updateQuizActionButton(contentData[currentLanguage].quizActionButtonConfirm, true); // Enable confirm button
        }

        quizActionButton.addEventListener('click', () => {
            const currentQuestion = questions[currentQuestionIndex];
            const actionButtonText = quizActionButtonTextEl.textContent;

            if (actionButtonText === contentData[currentLanguage].quizActionButtonConfirm) {
                if (!selectedOptionValue) return; // Should not happen if button is disabled

                const isCorrect = selectedOptionValue === currentQuestion.answer;
                if (isCorrect) {
                    score++;
                    feedbackTextEl.textContent = currentQuestion.feedbackCorrect;
                    feedbackTextEl.className = 'text-lg font-medium correct';
                } else {
                    feedbackTextEl.textContent = currentQuestion.feedbackIncorrect;
                    feedbackTextEl.className = 'text-lg font-medium incorrect';
                }

                // Visual feedback for options
                Array.from(optionsContainer.children).forEach(btn => {
                    btn.disabled = true;
                    if (btn.textContent === currentQuestion.answer) {
                        btn.classList.add('correct');
                        btn.classList.remove('selected'); // remove selected if it was also correct
                    } else if (btn.textContent === selectedOptionValue && !isCorrect) {
                        btn.classList.add('incorrect');
                        btn.classList.remove('selected');
                    }
                });

                if (currentQuestionIndex < questions.length - 1) {
                    updateQuizActionButton(contentData[currentLanguage].quizActionButtonNext, true);
                } else {
                    updateQuizActionButton(contentData[currentLanguage].quizActionButtonShowScore, true);
                }
            } else if (actionButtonText === contentData[currentLanguage].quizActionButtonNext) {
                currentQuestionIndex++;
                displayQuestion();
                 updateQuizActionButton(contentData[currentLanguage].quizActionButtonConfirm, false);
            } else if (actionButtonText === contentData[currentLanguage].quizActionButtonShowScore) {
                showFinalScore();
            }
        });
        
        function updateQuizActionButton(text, enabled) {
            quizActionButtonTextEl.textContent = text;
            quizActionButton.disabled = !enabled;
        }


        function showFinalScore() {
            questionContainer.style.display = 'none';
            optionsContainer.style.display = 'none';
            feedbackContainer.style.display = 'none';
            quizActionButton.style.display = 'none';

            scoreContainer.classList.remove('hidden');
            
            finalScoreTextEl.textContent = `${score} / ${questions.length}`;
            
            let message;
            const percentage = (score / questions.length) * 100;
            if (percentage >= 80) {
                message = contentData[currentLanguage].quizScoreMessageExcellent(score, questions.length);
            } else if (percentage >= 50) {
                message = contentData[currentLanguage].quizScoreMessageGood(score, questions.length);
            } else {
                message = contentData[currentLanguage].quizScoreMessageImprove(score, questions.length);
            }
            quizScoreMessageTextEl.textContent = message;
            quizScoreTitleTextEl.textContent = contentData[currentLanguage].quizScoreTitleText;
            quizRestartButtonTextEl.textContent = contentData[currentLanguage].quizRestartButtonText;
        }

        restartQuizButton.addEventListener('click', startQuiz);


        // --- Tab Navigation ---
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                tabs.forEach(item => item.classList.remove('active'));
                tab.classList.add('active');

                const target = tab.getAttribute('data-tab');
                tabContents.forEach(content => {
                    if (content.id === target) {
                        content.classList.remove('hidden');
                        if (target === 'quiz') { // Start quiz when tab is selected
                           startQuiz();
                        }
                    } else {
                        content.classList.add('hidden');
                    }
                });
                 // Initialize charts if the relevant tab is active and chart hasn't been created
                if (target === 'regioes' && !regioesChartInstance) {
                    createRegioesChart(currentLanguage);
                }
                if (target === 'relevo-hidrografia' && document.getElementById('feature-info').querySelector('[data-feature-type="rios-lagos"]')) {
                     if (!riosChartInstance) createRiosChart(currentLanguage);
                     riosChartContainer.classList.remove('hidden');
                } else if (target !== 'relevo-hidrografia' || !document.getElementById('feature-info').querySelector('[data-feature-type="rios-lagos"]')) {
                    // Hide rios chart if not on relevo-hidrografia tab or if rios-lagos is not selected
                    if (riosChartContainer) riosChartContainer.classList.add('hidden');
                }
            });
        });

        // --- Language Switcher ---
        languageSelect.addEventListener('change', (e) => {
            currentLanguage = e.target.value;
            updateTextContent(currentLanguage);
            // Re-render dynamic content based on new language
            const activeRegionButton = document.querySelector('.region-button.active');
            if (activeRegionButton) {
                updateRegionInfo(activeRegionButton.dataset.region, currentLanguage);
            }
            const activeFeatureButton = document.querySelector('.feature-button.active');
            if (activeFeatureButton) {
                updateFeatureInfo(activeFeatureButton.dataset.feature, currentLanguage);
            }
            // Recreate charts with new language labels
            if (regioesChartInstance) {
                regioesChartInstance.destroy();
                regioesChartInstance = null; // Ensure it's recreated if tab is active
            }
             if (riosChartInstance) {
                riosChartInstance.destroy();
                riosChartInstance = null;
            }
            // If on regions tab, recreate chart
            if (document.querySelector('.tab-button[data-tab="regioes"].active')) {
                 createRegioesChart(currentLanguage);
            }
            // If on relevo-hidrografia tab AND rios-lagos is selected, recreate chart
            if (document.querySelector('.tab-button[data-tab="relevo-hidrografia"].active') && document.getElementById('feature-info').querySelector('[data-feature-type="rios-lagos"]')) {
                createRiosChart(currentLanguage);
            }

            // If quiz tab is active, restart quiz in new language
            if (document.querySelector('.tab-button[data-tab="quiz"].active')) {
                startQuiz();
            }
        });

        function updateTextContent(lang) {
            const langData = contentData[lang];
            document.title = langData.appTitle;
            // Helper to set text or HTML
            const setText = (id, content) => {
                const el = document.getElementById(id);
                if (el) el.textContent = content;
            };
            const setHtml = (id, content) => {
                const el = document.getElementById(id);
                if (el) el.innerHTML = content;
            };

            setText('headerTitle', langData.headerTitle);
            setText('headerSubtitle', langData.headerSubtitle);
            setText('navVisaoGeral', langData.navVisaoGeral);
            setText('navRegioes', langData.navRegioes);
            setText('navRelevoHidrografia', langData.navRelevoHidrografia);
            setText('navGeografiaCultura', langData.navGeografiaCultura);
            setText('navQuiz', langData.navQuiz); // New Quiz Nav
            setText('visaoGeralTitle', langData.visaoGeralTitle);
            setHtml('visaoGeralPara1', langData.visaoGeralPara1);
            setHtml('visaoGeralPara2', langData.visaoGeralPara2);
            setText('visaoGeralPara3', langData.visaoGeralPara3);
            setText('textStartExploringBtn', langData.textStartExploringBtn);
            setText('curiosidadeVisaoGeralText', langData.curiosidadeVisaoGeralText);
            setText('regioesTitle', langData.regioesTitle);
            setText('regioesIntro', langData.regioesIntro);
            setText('mapaConceitualTitle', langData.mapaConceitualTitle);
            setText('mapNordeste', langData.mapNordeste);
            setText('mapSul', langData.mapSul);
            setText('mapCentroOeste', langData.mapCentroOeste);
            setText('mapSudoeste', langData.mapSudoeste);
            setText('mapOeste', langData.mapOeste);
            setText('btnNordeste', langData.btnNordeste);
            setText('btnSul', langData.btnSul);
            setText('btnCentroOeste', langData.btnCentroOeste);
            setText('btnSudoeste', langData.btnSudoeste);
            setText('btnOeste', langData.btnOeste);
            setText('regioesChartTitle', langData.regioesChartTitle);
            setText('regioesChartSubtitle', langData.regioesChartSubtitle);
            setText('relevoHidrografiaTitle', langData.relevoHidrografiaTitle);
            setText('relevoHidrografiaIntro', langData.relevoHidrografiaIntro);
            setText('btnMontanhas', langData.btnMontanhas);
            setText('btnPlanicies', langData.btnPlanicies);
            setText('btnRiosLagos', langData.btnRiosLagos);
            setText('btnLitoral', langData.btnLitoral);
            setText('riosChartTitle', langData.riosChartTitle);
            setText('riosChartSubtitle', langData.riosChartSubtitle);
            setText('curiosidadeRelevoText', langData.curiosidadeRelevoText);
            setText('geografiaCulturaTitle', langData.geografiaCulturaTitle);
            setText('geografiaCulturaIntro', langData.geografiaCulturaIntro);
            setText('accClimaTitle', langData.accClimaTitle);
            setText('accClimaContent', langData.accClimaContent);
            setText('accEconomiaTitle', langData.accEconomiaTitle);
            setText('accEconomiaContent', langData.accEconomiaContent);
            setText('accDesenvolvimentoTitle', langData.accDesenvolvimentoTitle);
            setText('accDesenvolvimentoContent', langData.accDesenvolvimentoContent);
            setText('accDesafiosTitle', langData.accDesafiosTitle);
            setText('accDesafiosContent', langData.accDesafiosContent);
            setText('curiosidadeCulturaText', langData.curiosidadeCulturaText);
            setHtml('footerText', langData.footerText.replace('<span id=\'currentYear\'></span>', `<span id='currentYear'>${new Date().getFullYear()}</span>`)); // Keep year dynamic
            setText('modalTitle', langData.modalTitle);

            // Update Quiz Texts (if quiz elements exist)
            setText('quizSectionTitle', langData.quizSectionTitle);
            setText('quizIntroText', langData.quizIntroText);
            // Action button and score titles will be updated by quiz logic based on state
        }

        // --- Region Interaction ---
        regionButtons.forEach(button => {
            button.addEventListener('click', () => {
                regionButtons.forEach(btn => {
                    btn.classList.remove('active', 'bg-sky-600', 'text-white');
                    btn.classList.add('bg-stone-200', 'hover:bg-stone-300');
                });
                button.classList.add('active', 'bg-sky-600', 'text-white');
                button.classList.remove('bg-stone-200', 'hover:bg-stone-300');
                
                const regionKey = button.dataset.region;
                updateRegionInfo(regionKey, currentLanguage);
                updateConceptualMapHighlight(regionKey);
                updateRegioesChartHighlight(regionKey);
            });
        });

        conceptualMapRegions.forEach(mapItem => {
            mapItem.addEventListener('click', () => {
                const regionKey = mapItem.dataset.mapRegion;
                // Simulate click on corresponding button
                const correspondingButton = document.querySelector(`.region-button[data-region="${regionKey}"]`);
                if (correspondingButton) {
                    correspondingButton.click();
                }
            });
        });

        function updateRegionInfo(regionKey, lang) {
            const region = contentData[lang].regioesData[regionKey];
            if (region) {
                regionInfoDiv.innerHTML = `
                    <img src="${region.imageUrl}" alt="Imagem ilustrativa da regi√£o ${region.nome}" class="w-full md:w-1/3 h-auto rounded-lg shadow-md object-cover max-h-60" onerror="this.src='https://placehold.co/300x200/cccccc/969696?text=Imagem+N%C3%A3o+Dispon%C3%ADvel'; this.alt='Imagem n√£o dispon√≠vel'">
                    <div class="md:w-2/3">
                        <h3 class="text-2xl font-semibold text-emerald-700 mb-2">${region.nome}</h3>
                        <p class="mb-2 text-sm"><strong>${lang === 'pt' ? 'Clima:' : 'Climate:'}</strong> ${region.clima}</p>
                        <p class="mb-2 text-sm"><strong>${lang === 'pt' ? 'Economia Principal:' : 'Main Economy:'}</strong> ${region.economia}</p>
                        <p class="text-base leading-relaxed">${region.descricao}</p>
                    </div>`;
            }
        }
        
        function updateConceptualMapHighlight(activeRegionKey) {
            conceptualMapRegions.forEach(item => {
                if (item.dataset.mapRegion === activeRegionKey) {
                    item.classList.add('active-map-region');
                } else {
                    item.classList.remove('active-map-region');
                }
            });
        }

        // --- Feature Interaction (Relevo e Hidrografia) ---
        featureButtons.forEach(button => {
            button.addEventListener('click', () => {
                featureButtons.forEach(btn => {
                    btn.classList.remove('active', 'bg-sky-600', 'text-white');
                    btn.classList.add('bg-stone-200', 'hover:bg-stone-300');
                });
                button.classList.add('active', 'bg-sky-600', 'text-white');
                button.classList.remove('bg-stone-200', 'hover:bg-stone-300');
                
                const featureKey = button.dataset.feature;
                updateFeatureInfo(featureKey, currentLanguage);

                if (featureKey === 'rios-lagos') {
                    riosChartContainer.classList.remove('hidden');
                    if (!riosChartInstance) { // Create chart if it doesn't exist
                        createRiosChart(currentLanguage);
                    } else { // Update existing chart data/labels if needed (or simply ensure it's visible)
                        riosChartInstance.data.datasets[0].label = contentData[currentLanguage].riosChartData.label;
                        riosChartInstance.data.labels = contentData[currentLanguage].riosChartData.labels;
                        riosChartInstance.update();
                    }
                } else {
                    riosChartContainer.classList.add('hidden');
                }
            });
        });

        function updateFeatureInfo(featureKey, lang) {
            const feature = contentData[lang].featureData[featureKey];
            if (feature) {
                featureInfoDiv.innerHTML = `
                    <img src="${feature.imagem}" alt="Imagem ilustrativa de ${feature.nome}" class="w-full md:w-1/3 h-auto rounded-lg shadow-md object-cover max-h-48" onerror="this.src='https://placehold.co/300x200/cccccc/969696?text=Imagem+N%C3%A3o+Dispon%C3%ADvel'; this.alt='Imagem n√£o dispon√≠vel'">
                    <div class="md:w-2/3" data-feature-type="${featureKey}"> <h3 class="text-2xl font-semibold text-emerald-700 mb-2">${feature.nome}</h3>
                        <p class="text-base leading-relaxed">${feature.descricao}</p>
                    </div>`;
            }
        }

        // --- Accordion (Geografia e Cultura) ---
        accordionButtons.forEach(button => {
            button.addEventListener('click', () => {
                const content = button.nextElementSibling;
                const arrow = button.querySelector('.arrow');

                // Close other open accordions
                accordionButtons.forEach(otherButton => {
                    if (otherButton !== button) {
                        otherButton.classList.remove('active');
                        otherButton.nextElementSibling.classList.remove('open');
                        otherButton.nextElementSibling.style.maxHeight = null;
                        otherButton.querySelector('.arrow').style.transform = 'rotate(0deg)';
                    }
                });

                button.classList.toggle('active');
                content.classList.toggle('open');
                
                if (content.classList.contains('open')) {
                    content.style.maxHeight = content.scrollHeight + "px";
                    arrow.style.transform = 'rotate(180deg)';
                } else {
                    content.style.maxHeight = null;
                    arrow.style.transform = 'rotate(0deg)';
                }
            });
        });

        // --- Modal (Curiosidades) ---
        function openModal(contentKey) {
            modalContent.textContent = contentData[currentLanguage].curiosidades[contentKey];
            curiosidadeModal.classList.add('open');
        }
        curiosidadeVisaoGeralBtn.addEventListener('click', () => openModal('visaoGeral'));
        curiosidadeRelevoBtn.addEventListener('click', () => openModal('relevo'));
        curiosidadeCulturaBtn.addEventListener('click', () => openModal('cultura'));
        modalCloseButton.addEventListener('click', () => curiosidadeModal.classList.remove('open'));
        curiosidadeModal.addEventListener('click', (e) => { // Close on overlay click
            if (e.target === curiosidadeModal) {
                curiosidadeModal.classList.remove('open');
            }
        });

        // --- Chart Creation ---
        function createRegioesChart(lang) {
            const ctx = document.getElementById('regioesChart').getContext('2d');
            const langData = contentData[lang];
            const regionNames = Object.values(langData.regioesData).map(r => r.nome.replace(/ \S+$/, '')); // Remove emoji for label
            const ecosystemCounts = Object.values(langData.regioesData).map(r => r.ecossistemas);

            if (regioesChartInstance) {
                regioesChartInstance.destroy();
            }

            regioesChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: regionNames,
                    datasets: [{
                        label: langData.regioesChartTitle.split(':')[1]?.trim() || 'Ecossistemas', // Dynamic label from title
                        data: ecosystemCounts,
                        backgroundColor: [
                            'rgba(2, 132, 199, 0.7)', // sky-600
                            'rgba(249, 115, 22, 0.7)', // orange-500
                            'rgba(202, 138, 4, 0.7)',  // yellow-600
                            'rgba(217, 119, 6, 0.7)',  // amber-600
                            'rgba(5, 150, 105, 0.7)'   // emerald-600
                        ],
                        borderColor: [
                            'rgba(2, 132, 199, 1)',
                            'rgba(249, 115, 22, 1)',
                            'rgba(202, 138, 4, 1)',
                            'rgba(217, 119, 6, 1)',
                            'rgba(5, 150, 105, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y', // Horizontal bar chart
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: { display: true, text: lang === 'pt' ? 'N√∫mero Estimado de Ecossistemas' : 'Estimated Number of Ecosystems' }
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ${context.raw}`;
                                }
                            }
                        }
                    }
                }
            });
        }

        function updateRegioesChartHighlight(activeRegionKey) {
            if (!regioesChartInstance) return;
            const regionOrder = ["nordeste", "sul", "centro-oeste", "sudoeste", "oeste"]; // Match this to chart label order
            const activeIndex = regionOrder.indexOf(activeRegionKey);

            const defaultColors = [
                'rgba(2, 132, 199, 0.7)', 'rgba(249, 115, 22, 0.7)', 'rgba(202, 138, 4, 0.7)',
                'rgba(217, 119, 6, 0.7)', 'rgba(5, 150, 105, 0.7)'
            ];
            const defaultBorderColors = [
                'rgba(2, 132, 199, 1)', 'rgba(249, 115, 22, 1)', 'rgba(202, 138, 4, 1)',
                'rgba(217, 119, 6, 1)', 'rgba(5, 150, 105, 1)'
            ];
            
            const highlightColor = 'rgba(234, 179, 8, 0.8)'; // yellow-500 for highlight
            const highlightBorderColor = 'rgba(234, 179, 8, 1)';

            regioesChartInstance.data.datasets[0].backgroundColor = defaultColors.map((color, index) => 
                index === activeIndex ? highlightColor : color
            );
            regioesChartInstance.data.datasets[0].borderColor = defaultBorderColors.map((color, index) => 
                index === activeIndex ? highlightBorderColor : color
            );
            regioesChartInstance.update();
        }


        function createRiosChart(lang) {
            const ctxRios = document.getElementById('riosChart').getContext('2d');
            const riosData = contentData[lang].riosChartData;

            if (riosChartInstance) {
                riosChartInstance.destroy();
            }
            riosChartInstance = new Chart(ctxRios, {
                type: 'bar', // Horizontal bar chart
                data: {
                    labels: riosData.labels,
                    datasets: [{
                        label: riosData.label,
                        data: riosData.data,
                        backgroundColor: 'rgba(14, 165, 233, 0.7)', // sky-500
                        borderColor: 'rgba(14, 165, 233, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: { display: true, text: lang === 'pt' ? 'Extens√£o (km)' : 'Length (km)' }
                        }
                    },
                    plugins: {
                        legend: { display: false }
                    }
                }
            });
        }

        // --- Initial Setup ---
        updateTextContent(currentLanguage);
        // Set initial active elements and content
        if (regionButtons.length > 0) {
            updateRegionInfo(regionButtons[0].dataset.region, currentLanguage); // Show info for the first region
            updateConceptualMapHighlight(regionButtons[0].dataset.region);
        }
        if (featureButtons.length > 0) {
            updateFeatureInfo(featureButtons[0].dataset.feature, currentLanguage); // Show info for the first feature
        }
         // Create regioes chart on initial load if visao-geral or regioes is active (default is visao-geral)
        const initialActiveTab = document.querySelector('.tab-button.active').dataset.tab;
        if (initialActiveTab === 'visao-geral' || initialActiveTab === 'regioes') {
            // The regioes chart is on the 'regioes' tab. Let's create it when that tab is first shown.
            // For now, we can assume default active region button is 'nordeste'
            // If the default active tab is 'regioes', then create the chart.
            if (initialActiveTab === 'regioes' && !regioesChartInstance) {
                 createRegioesChart(currentLanguage);
                 updateRegioesChartHighlight(document.querySelector('.region-button.active').dataset.region);
            }
        }
         // Ensure the "Comece Explorando" button works
        document.getElementById('startExploringBtn').addEventListener('click', () => {
            const regioesTabButton = document.querySelector('button[data-tab="regioes"]');
            if (regioesTabButton) {
                regioesTabButton.click(); // Simulate click to switch tab and trigger chart creation
            }
        });

    </script>
</body>
</html>
